"use strict";(self.webpackChunkcivilization_js=self.webpackChunkcivilization_js||[]).push([[587],{391:(e,n,o)=>{o.d(n,{g:()=>c});var t=o(4848),s=o(9860),i=o(2589);function c({zIndex:e,screenSize:n,opacity:o,children:c,...r}){const a=i.L9;return(0,t.jsx)(s.H,{width:n.x,height:n.y-a,style:{zIndex:e,opacity:o,position:"absolute"},...r,children:e=>{e.clearRect(0,0,n.x,n.y-a),c(e)}})}},9587:(e,n,o)=>{o.r(n),o.d(n,{Map:()=>v});var t=o(4848),s=o(6060),i=o(205),c=o(391),r=o(6630);const a=({map:e,zIndex:n,screenSize:o})=>{const{zoom:a,position:v}=(0,s.K)().store,{position:f,zoom:u}=(0,r.P)().store,d=(0,i.p8)(v,f),l=a*u,p=(0,i.oV)((0,i.Oo)(e.width,e.height),l);return(0,t.jsx)(c.g,{screenSize:o,zIndex:n,children:n=>n.drawImage(e,d.x,d.y,p.x,p.y)})};function v(e){const{map:n}=(0,r.P)().store;return n?(0,t.jsx)(a,{...e,map:n},n.src):null}},9860:(e,n,o)=>{o.d(n,{H:()=>c});var t=o(4848),s=o(6540),i=o(205);const c=({children:e,onClick:n,onMouseDown:o,onMouseMove:c,onMouseUp:r,...a})=>{const v=(0,s.useRef)(null),[f,u]=(0,s.useState)(null);return(0,s.useEffect)(()=>{if(v.current){const n=v.current.getContext("2d");e(n),u(n)}},[e]),(0,t.jsx)("canvas",{ref:v,...a,onClick:n&&f?e=>n(f,(0,i.Oo)(e.nativeEvent.offsetX,e.nativeEvent.offsetY)):void 0,onMouseDown:o&&f?e=>o(f,(0,i.Oo)(e.nativeEvent.offsetX,e.nativeEvent.offsetY)):void 0,onMouseMove:c&&f?e=>c(f,(0,i.Oo)(e.nativeEvent.offsetX,e.nativeEvent.offsetY)):void 0,onMouseUp:r&&f?e=>r(f,(0,i.Oo)(e.nativeEvent.offsetX,e.nativeEvent.offsetY)):void 0})}}}]);