"use strict";(self.webpackChunkcivilization_js=self.webpackChunkcivilization_js||[]).push([[669],{3330:(o,t,e)=>{e.d(t,{g:()=>r});var n=e(4848),i=e(9860),s=e(2589);function r({zIndex:o,screenSize:t,opacity:e,children:r,...c}){const a=s.L9;return(0,n.jsx)(i.H,{width:t.x,height:t.y-a,style:{zIndex:o,opacity:e,position:"absolute"},...c,children:o=>{o.clearRect(0,0,t.x,t.y-a),r(o)}})}},6669:(o,t,e)=>{e.r(t),e.d(t,{Map:()=>x});var n=e(4848),i=e(7339),s=e(327),r=e(6608),c=e(6060),a=e(3330),l=e(205),f=e(2978),u=e(3883),d=e(9760);function v({isEditable:o,zIndex:t,map:e,screenSize:c,zoom:l,position:d,opacity:v,onUpdate:p}){const{isGridTurnedOn:x}=(0,f.H)().store,h=u.s.hexWidth*l,y=(0,r.df)(h);return(0,n.jsx)(a.g,{screenSize:c,zIndex:t,opacity:v,children:o=>{for(let t=0;t<e.columnLength&&!(t*y+d.y>c.y);t+=1){const n=e.data[t];for(let e=0;e<n.length&&!(e*h+d.x>c.x);e+=1){const r=n[e];(0,i._)({ctx:o,position:{x:e,y:t},offset:d,width:h,color:r?s.M3:s.mp,isGridTurnedOn:x})}}}})}function p({zoom:o,position:t,...e}){const{zoom:i,position:s}=(0,c.K)().store;return(0,n.jsx)(v,{...e,zoom:i*o,position:(0,l.p8)(s,t)})}function x(o){const{store:{isVisible:t,map:e,opacity:i,position:s,zoom:r},setStore:c}=(0,d.P)();return t&&e?(0,n.jsx)(p,{...o,map:e,zoom:r,position:s,opacity:i,onUpdate:c}):null}},7339:(o,t,e)=>{e.d(t,{_:()=>r});var n=e(6608),i=e(205);function s(o,t,e){return(0,i.Oo)(o.x+e*Math.cos(t),o.y+e*Math.sin(t))}function r({ctx:o,position:t,offset:e,width:r,color:c,isGridTurnedOn:a}){const l=t.y%2==0?r/2:r,f=(0,n.c)(r),u=(0,n.L$)(f);!function({ctx:o,centerPoint:t,startAngle:e,radius:n,sides:i,fillColor:r,strokeColor:c}){o.beginPath();const a=s(t,e,n);o.moveTo(a.x,a.y);for(let r=0;r<i;r+=1){const c=s(t,r*Math.PI*2/i+e,n);o.lineTo(c.x,c.y)}o.closePath(),r&&(o.fillStyle=r,o.fill()),c&&(o.strokeStyle=c,o.stroke())}({ctx:o,centerPoint:(0,i.Oo)(t.x*r+l+(e?.x||0),t.y*u+f+(e?.y||0)),startAngle:Math.PI/2,radius:f,sides:6,fillColor:c,strokeColor:a?"#000":void 0})}},9860:(o,t,e)=>{e.d(t,{H:()=>r});var n=e(4848),i=e(6540),s=e(205);const r=({children:o,onClick:t,onMouseDown:e,onMouseMove:r,onMouseUp:c,...a})=>{const l=(0,i.useRef)(null),[f,u]=(0,i.useState)(null);return(0,i.useEffect)(()=>{if(l.current){const t=l.current.getContext("2d");o(t),u(t)}},[o]),(0,n.jsx)("canvas",{ref:l,...a,onClick:t&&f?o=>t(f,(0,s.Oo)(o.nativeEvent.offsetX,o.nativeEvent.offsetY)):void 0,onMouseDown:e&&f?o=>e(f,(0,s.Oo)(o.nativeEvent.offsetX,o.nativeEvent.offsetY)):void 0,onMouseMove:r&&f?o=>r(f,(0,s.Oo)(o.nativeEvent.offsetX,o.nativeEvent.offsetY)):void 0,onMouseUp:c&&f?o=>c(f,(0,s.Oo)(o.nativeEvent.offsetX,o.nativeEvent.offsetY)):void 0})}}}]);