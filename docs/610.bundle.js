"use strict";(self.webpackChunkcivilization_js=self.webpackChunkcivilization_js||[]).push([[610],{288:(e,t,n)=>{n.d(t,{A:()=>c});var i=n(1601),o=n.n(i),s=n(6314),r=n.n(s)()(o());r.push([e.id,".bar-container {\n    height: 25px;\n    position: relative;\n    display: flex;\n    align-items: center;\n}\n.bar {\n    height: 5px;\n    width: 100%;\n    background: #7c7c7c;\n}\n.bar-button {\n    outline: 2px solid #656565;\n    border-radius: 50%;\n    position: absolute;\n    top: 4px;\n    background: #ccc;\n    cursor: pointer;\n}\n.bar-button > .tip {\n    position: absolute;\n    top: -18px;\n    background: #fff8d9;\n    border: 1px solid black;\n    font-size: 12px;\n    padding: 0 2px;\n}\n",""]);const c=r},1332:(e,t,n)=>{n.d(t,{a:()=>M});var i=n(4848),o=n(5072),s=n.n(o),r=n(7825),c=n.n(r),a=n(7659),l=n.n(a),u=n(5056),d=n.n(u),h=n(540),p=n.n(h),v=n(1113),f=n.n(v),m=n(288),x={};x.styleTagTransform=f(),x.setAttributes=d(),x.insert=l().bind(null,"head"),x.domAPI=c(),x.insertStyleElement=p(),s()(m.A,x),m.A&&m.A.locals&&m.A.locals;var g=n(6540),b=n(9980);const y=({buttonSize:e=16,defaultValue:t=0,onChange:n,min:o=0,max:s=1,round:r})=>{const c=(0,g.useRef)(null),a=(0,g.useRef)(0),l=(0,g.useRef)(0),u=(0,g.useRef)(0),[d,h]=(0,g.useState)(0);(0,g.useEffect)(()=>{c.current&&(a.current=c.current.clientWidth,u.current=function(e,t,n,i){return(e-n)/(i-n)*t}(t,a.current,o,s),h(t))},[]);const p=e=>{if(u.current===e)return;u.current=e;let t=function(e,t,n,i){return e/t*(i-n)+n}(e,a.current,o,s);r&&(t=Math.round(t)),h(t),n(t)},{startMoving:v}=(0,b.c)(e=>{let t=e.clientX-l.current;t<0&&(t=0),t>a.current&&(t=a.current),p(t)}),f=(e,t)=>{l.current=e.clientX-t,v()};return(0,i.jsxs)("div",{className:"bar-container",onMouseDown:e=>{e.stopPropagation();const t=e.nativeEvent.offsetX;p(t),f(e,t)},children:[(0,i.jsx)("div",{ref:c,className:"bar"}),(0,i.jsx)("div",{className:"bar-button",style:{left:u.current-e/2,width:e,height:e},onMouseDown:e=>{e.stopPropagation(),f(e,u.current)},children:a.current?(0,i.jsx)("div",{className:"tip",children:r?d:d.toFixed(2)}):null})]})},M=({title:e,onChange:t,...n})=>(0,i.jsxs)("div",{style:{padding:"0 8px",position:"relative",marginTop:6},children:[(0,i.jsx)("div",{style:{fontSize:12,position:"absolute",top:-6},children:e}),(0,i.jsx)(y,{...n,onChange:t})]})},2945:(e,t,n)=>{n.d(t,{q:()=>o});var i=n(6540);function o(e,t,n){return(0,i.useCallback)(i=>{t&&e.includes(i)&&n()},[e,t,n])}},4610:(e,t,n)=>{n.r(t),n.d(t,{MiniMap:()=>m});var i=n(4848),o=n(6540),s=n(4035),r=n(5055),c=n(9860),a=n(7339),l=n(327),u=n(889),d=n(6283),h=n(2945),p=n(5788),v=n(9760);const f=({panelWidth:e,title:t,map:n})=>{const{width:o,height:s,hexWidth:r}=(0,p.y$)(e,n);return(0,i.jsx)(c.H,{title:t,width:o,height:s,children:e=>{e.clearRect(0,0,o,s),n.data.forEach((t,n)=>{t.forEach((t,i)=>{(0,a._)({ctx:e,position:{x:i,y:n},width:r,color:t?l.M3:l.mp})})})}})},m=({isSelected:e,title:t,panelWidth:n,onMapCreate:c,createMapKeyBinding:a})=>{const{store:{map:l,isVisible:p,showCreateButton:m},setStore:x}=(0,v.P)(),g=(0,o.useCallback)(()=>{c({shouldCreateWaterMap:!0})},[]),b=(0,h.q)(a,e,g);return(0,u.D)(b),(0,i.jsx)(d.v,{isVisible:p,setVisible:e=>x({isVisible:e}),setOpacity:e=>x({opacity:e}),map:l&&(0,i.jsx)(f,{panelWidth:n,title:t,map:l}),title:t,children:m&&(0,i.jsx)("div",{children:(0,i.jsx)(s.e,{alignCenter:!0,noPadding:!0,children:(0,i.jsxs)(r.$,{onClick:g,children:["Create Map (",a,")"]})})})})}},5788:(e,t,n)=>{n.d(t,{lF:()=>a,qJ:()=>u,qc:()=>l,wm:()=>h,y$:()=>d});var i=n(6608),o=n(205),s=n(2589);const r=140;function c(e,t){return(0,o.tI)((0,o.Ks)(e,t),2)}function a(e,t){return{zoom:(0,o.pz)(e,t),position:(0,o.at)()}}function l(e,t){const n=(0,o.pz)(s.bD.minWidth,t.x);return{zoom:n,position:c(e,(0,o.oV)(t,n))}}function u(e,t,n){const i=(0,o.oV)(e,n);return function(e,t){const n=(0,o.at)();return[...t,e].forEach(e=>{n.x<e.width&&(n.x=e.width),n.y<e.height&&(n.y=e.height)}),n}({width:i.x,height:i.y},t)}function d(e,t){let n=e/t.rowLength,o=e+n/2;const s=(0,i.df)(n);let c=s*t.columnLength+s/2;const a=o/c;return c>r&&(c=r,o=a*c,n=o/t.rowLength),{width:o,height:c,hexWidth:n}}function h(e,t){let n=e,i=n*t.height/t.width;const o=n/i;return i>r&&(i=r,n=o*i),{width:n,height:i}}},6283:(e,t,n)=>{n.d(t,{v:()=>C});var i=n(4848),o=n(6540),s=n(4035),r=n(5055),c=n(5072),a=n.n(c),l=n(7825),u=n.n(l),d=n(7659),h=n.n(d),p=n(5056),v=n.n(p),f=n(540),m=n.n(f),x=n(1113),g=n.n(x),b=n(8964),y={};y.styleTagTransform=g(),y.setAttributes=v(),y.insert=h().bind(null,"head"),y.domAPI=u(),y.insertStyleElement=m(),a()(b.A,y),b.A&&b.A.locals&&b.A.locals;var M=n(5221);const w=({isVisible:e,toggleVisible:t})=>(0,i.jsx)("div",{className:"eye",onClick:e=>{e.stopPropagation(),t()},children:(0,i.jsx)(M.B,{src:e?'<svg width="20" viewBox="0 0 512 400">\n    <path d="m494.8,241.4l-50.6-49.4c-50.1-48.9-116.9-75.8-188.2-75.8s-138.1,26.9-188.2,75.8l-50.6,49.4c-11.3,12.3-4.3,25.4 0,29.2l50.6,49.4c50.1,48.9 116.9,75.8 188.2,75.8s138.1-26.9 188.2-75.8l50.6-49.4c4-3.8 11.7-16.4 0-29.2zm-238.8,84.4c-38.5,0-69.8-31.3-69.8-69.8 0-38.5 31.3-69.8 69.8-69.8 38.5,0 69.8,31.3 69.8,69.8 0,38.5-31.3,69.8-69.8,69.8zm-195.3-69.8l35.7-34.8c27-26.4 59.8-45.2 95.7-55.4-28.2,20.1-46.6,53-46.6,90.1 0,37.1 18.4,70.1 46.6,90.1-35.9-10.2-68.7-29-95.7-55.3l-35.7-34.7zm355,34.8c-27,26.3-59.8,45.1-95.7,55.3 28.2-20.1 46.6-53 46.6-90.1 0-37.2-18.4-70.1-46.6-90.1 35.9,10.2 68.7,29 95.7,55.4l35.6,34.8-35.6,34.7z"></path>\n</svg>\n':'<svg width="20" viewBox="0 4 24 19">\n    <path stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" d="M21.0006 12.0007C19.2536 15.5766 15.8779 18 12 18M12 18C8.12204 18 4.7463 15.5766 2.99977 12.0002M12 18L12 21M19.4218 14.4218L21.4999 16.5M16.2304 16.9687L17.5 19.5M4.57812 14.4218L2.5 16.5M7.76953 16.9687L6.5 19.5"></path>\n</svg>\n',width:20})});var j=n(1332);function C({title:e,map:t,children:n,...c}){const[a,l]=(0,o.useState)(!0);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"title",children:[e,(0,i.jsxs)(s.e,{noGaps:!0,alignCenter:!0,children:[t&&c.setVisible&&(0,i.jsx)(w,{isVisible:c.isVisible,toggleVisible:()=>c.setVisible(!c.isVisible)}),(t||n)&&(0,i.jsx)(r.$,{style:{padding:0,width:25,height:25,marginLeft:3},onClick:e=>{e.stopPropagation(),l(!a)},children:a?"-":"+"})]})]}),a&&(0,i.jsxs)(i.Fragment,{children:[t&&c.setOpacity&&(0,i.jsx)(j.a,{title:"opacity",defaultValue:1,onChange:c.setOpacity}),t&&(0,i.jsx)("div",{className:"mini-map",children:t}),n]})]})}},7339:(e,t,n)=>{n.d(t,{_:()=>r});var i=n(6608),o=n(205);function s(e,t,n){return(0,o.Oo)(e.x+n*Math.cos(t),e.y+n*Math.sin(t))}function r({ctx:e,position:t,offset:n,width:r,color:c,isGridTurnedOn:a}){const l=t.y%2==0?r/2:r,u=(0,i.c)(r),d=(0,i.L$)(u);!function({ctx:e,centerPoint:t,startAngle:n,radius:i,sides:o,fillColor:r,strokeColor:c}){e.beginPath();const a=s(t,n,i);e.moveTo(a.x,a.y);for(let r=0;r<o;r+=1){const c=s(t,r*Math.PI*2/o+n,i);e.lineTo(c.x,c.y)}e.closePath(),r&&(e.fillStyle=r,e.fill()),c&&(e.strokeStyle=c,e.stroke())}({ctx:e,centerPoint:(0,o.Oo)(t.x*r+l+(n?.x||0),t.y*d+u+(n?.y||0)),startAngle:Math.PI/2,radius:u,sides:6,fillColor:c,strokeColor:a?"#000":void 0})}},8964:(e,t,n)=>{n.d(t,{A:()=>c});var i=n(1601),o=n.n(i),s=n(6314),r=n.n(s)()(o());r.push([e.id,".eye {\n    cursor: pointer;\n    border-radius: 5px;\n    padding: 0 1px;\n    margin-bottom: -1px;\n}\n.eye:hover {\n    outline: 3px solid #7c7c7c;\n}\n",""]);const c=r},9860:(e,t,n)=>{n.d(t,{H:()=>r});var i=n(4848),o=n(6540),s=n(205);const r=({children:e,onClick:t,onMouseDown:n,onMouseMove:r,onMouseUp:c,...a})=>{const l=(0,o.useRef)(null),[u,d]=(0,o.useState)(null);return(0,o.useEffect)(()=>{if(l.current){const t=l.current.getContext("2d");e(t),d(t)}},[e]),(0,i.jsx)("canvas",{ref:l,...a,onClick:t&&u?e=>t(u,(0,s.Oo)(e.nativeEvent.offsetX,e.nativeEvent.offsetY)):void 0,onMouseDown:n&&u?e=>n(u,(0,s.Oo)(e.nativeEvent.offsetX,e.nativeEvent.offsetY)):void 0,onMouseMove:r&&u?e=>r(u,(0,s.Oo)(e.nativeEvent.offsetX,e.nativeEvent.offsetY)):void 0,onMouseUp:c&&u?e=>c(u,(0,s.Oo)(e.nativeEvent.offsetX,e.nativeEvent.offsetY)):void 0})}},9980:(e,t,n)=>{n.d(t,{c:()=>o});var i=n(6540);function o(e,t=!0){const n=(0,i.useRef)(!1),o=(0,i.useRef)(e);return(0,i.useEffect)(()=>{if(!t)return()=>{};function e(e){n.current&&requestAnimationFrame(()=>o.current(e))}function i(e){e.stopPropagation(),n.current=!1}return document.addEventListener("touchmove",e),document.addEventListener("touchend",i),document.addEventListener("mousemove",e),document.addEventListener("mouseup",i),()=>{document.removeEventListener("mousemove",e),document.removeEventListener("mouseup",i),document.removeEventListener("touchmove",e),document.removeEventListener("touchend",i)}},[t]),{startMoving:()=>{n.current=!0,o.current=e}}}}}]);