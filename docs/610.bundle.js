"use strict";(self.webpackChunkcivilization_js=self.webpackChunkcivilization_js||[]).push([[610],{288:(e,t,n)=>{n.d(t,{A:()=>a});var i=n(1601),o=n.n(i),s=n(6314),r=n.n(s)()(o());r.push([e.id,".bar-container {\n    height: 25px;\n    position: relative;\n    display: flex;\n    align-items: center;\n}\n.bar {\n    height: 5px;\n    width: 100%;\n    background: #7c7c7c;\n}\n.bar-button {\n    outline: 2px solid #656565;\n    border-radius: 50%;\n    position: absolute;\n    top: 4px;\n    background: #ccc;\n    cursor: pointer;\n}\n",""]);const a=r},2279:(e,t,n)=>{n.d(t,{v:()=>A});var i=n(4848),o=n(6540),s=n(4035),r=n(5055),a=n(5072),c=n.n(a),l=n(7825),d=n.n(l),u=n(7659),v=n.n(u),h=n(5056),p=n.n(h),m=n(540),f=n.n(m),g=n(1113),x=n.n(g),b=n(8964),y={};y.styleTagTransform=x(),y.setAttributes=p(),y.insert=v().bind(null,"head"),y.domAPI=d(),y.insertStyleElement=f(),c()(b.A,y),b.A&&b.A.locals&&b.A.locals;var M=n(5221);const j=({isVisible:e,toggleVisible:t})=>(0,i.jsx)("div",{className:"eye",onClick:e=>{e.stopPropagation(),t()},children:(0,i.jsx)(M.B,{src:e?'<svg width="20" viewBox="0 0 512 400">\n    <path d="m494.8,241.4l-50.6-49.4c-50.1-48.9-116.9-75.8-188.2-75.8s-138.1,26.9-188.2,75.8l-50.6,49.4c-11.3,12.3-4.3,25.4 0,29.2l50.6,49.4c50.1,48.9 116.9,75.8 188.2,75.8s138.1-26.9 188.2-75.8l50.6-49.4c4-3.8 11.7-16.4 0-29.2zm-238.8,84.4c-38.5,0-69.8-31.3-69.8-69.8 0-38.5 31.3-69.8 69.8-69.8 38.5,0 69.8,31.3 69.8,69.8 0,38.5-31.3,69.8-69.8,69.8zm-195.3-69.8l35.7-34.8c27-26.4 59.8-45.2 95.7-55.4-28.2,20.1-46.6,53-46.6,90.1 0,37.1 18.4,70.1 46.6,90.1-35.9-10.2-68.7-29-95.7-55.3l-35.7-34.7zm355,34.8c-27,26.3-59.8,45.1-95.7,55.3 28.2-20.1 46.6-53 46.6-90.1 0-37.2-18.4-70.1-46.6-90.1 35.9,10.2 68.7,29 95.7,55.4l35.6,34.8-35.6,34.7z"></path>\n</svg>\n':'<svg width="20" viewBox="0 4 24 19">\n    <path stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" d="M21.0006 12.0007C19.2536 15.5766 15.8779 18 12 18M12 18C8.12204 18 4.7463 15.5766 2.99977 12.0002M12 18L12 21M19.4218 14.4218L21.4999 16.5M16.2304 16.9687L17.5 19.5M4.57812 14.4218L2.5 16.5M7.76953 16.9687L6.5 19.5"></path>\n</svg>\n',width:20})});var C=n(288),E={};E.styleTagTransform=x(),E.setAttributes=p(),E.insert=v().bind(null,"head"),E.domAPI=d(),E.insertStyleElement=f(),c()(C.A,E),C.A&&C.A.locals&&C.A.locals;var k=n(9980);const w=({buttonSize:e=16,defaultValue:t=0,onChange:n})=>{const s=(0,o.useRef)(null),r=(0,o.useRef)(0),[a,c]=(0,o.useState)(0);(0,o.useEffect)(()=>{s.current&&(r.current=s.current.clientWidth,c(t*r.current))},[s.current]);const l={startingPoint:0},d=e=>{c(e),n(e/r.current)},{startMoving:u}=(0,k.c)(e=>{let t=e.clientX-l.startingPoint;t<0&&(t=0),t>r.current&&(t=r.current),d(t)}),v=(e,t)=>{l.startingPoint=e.clientX-t,u()};return(0,i.jsxs)("div",{className:"bar-container",onMouseDown:e=>{e.stopPropagation();const t=e.nativeEvent.offsetX;d(t),v(e,t)},children:[(0,i.jsx)("div",{ref:s,className:"bar"}),(0,i.jsx)("div",{className:"bar-button",style:{left:a-e/2,width:e,height:e},onMouseDown:e=>{e.stopPropagation(),v(e,a)}})]})},P=({opacity:e,onChange:t})=>(0,i.jsx)("div",{style:{padding:"0 8px"},children:(0,i.jsx)(w,{defaultValue:e,onChange:t})});function A({title:e,map:t,children:n,...a}){const[c,l]=(0,o.useState)(!0);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"title",children:[e,(0,i.jsxs)(s.e,{noGaps:!0,alignCenter:!0,children:[t&&a.setVisible&&(0,i.jsx)(j,{isVisible:a.isVisible,toggleVisible:()=>a.setVisible(!a.isVisible)}),(t||n)&&(0,i.jsx)(r.$,{style:{padding:0,width:25,height:25,marginLeft:3},onClick:e=>{e.stopPropagation(),l(!c)},children:c?"-":"+"})]})]}),c&&(0,i.jsxs)(i.Fragment,{children:[t&&a.setOpacity&&(0,i.jsx)(P,{opacity:a.opacity,onChange:a.setOpacity}),t&&(0,i.jsx)("div",{className:"mini-map",children:t}),n]})]})}},4610:(e,t,n)=>{n.r(t),n.d(t,{MiniMap:()=>h});var i=n(4848),o=n(4035),s=n(5055),r=n(9860),a=n(7339),c=n(327),l=n(6608),d=n(2279),u=n(9760);const v=({panelWidth:e,title:t,map:n})=>{const o=e/(n.rowLength+10),s=(0,l.df)(o);return(0,i.jsx)(r.H,{title:t,width:e+o/2,height:(s+1)*n.columnLength,style:{maxHeight:170},children:e=>{n.data.forEach((t,n)=>{t.forEach((t,i)=>{(0,a._)({ctx:e,position:{x:i,y:n},width:o,color:t?c.M3:c.mp})})})}})},h=({title:e,panelWidth:t,onMapCreate:n})=>{const{store:{map:r,isVisible:a,opacity:c,showCreateButton:l},setStore:h}=(0,u.P)();return(0,i.jsx)(d.v,{isVisible:a,setVisible:e=>h({isVisible:e}),opacity:c,setOpacity:e=>h({opacity:e}),map:r&&(0,i.jsx)(v,{panelWidth:t,title:e,map:r}),title:e,children:l&&(0,i.jsx)("div",{children:(0,i.jsx)(o.e,{alignCenter:!0,noPadding:!0,children:(0,i.jsx)(s.$,{onClick:()=>n({shouldCreateWaterMap:!0}),children:"Create Map"})})})})}},7339:(e,t,n)=>{n.d(t,{_:()=>r});var i=n(6608),o=n(205);function s(e,t,n){return(0,o.Oo)(e.x+n*Math.cos(t),e.y+n*Math.sin(t))}function r({ctx:e,position:t,offset:n,width:r,color:a,isGridTurnedOn:c}){const l=t.y%2==0?r/2:r,d=(0,i.c)(r),u=(0,i.L$)(d);!function({ctx:e,centerPoint:t,startAngle:n,radius:i,sides:o,fillColor:r,strokeColor:a}){e.beginPath();const c=s(t,n,i);e.moveTo(c.x,c.y);for(let r=0;r<o;r+=1){const a=s(t,r*Math.PI*2/o+n,i);e.lineTo(a.x,a.y)}e.closePath(),r&&(e.fillStyle=r,e.fill()),a&&(e.strokeStyle=a,e.stroke())}({ctx:e,centerPoint:(0,o.Oo)(t.x*r+l+(n?.x||0),t.y*u+d+(n?.y||0)),startAngle:Math.PI/2,radius:d,sides:6,fillColor:a,strokeColor:c?"#000":void 0})}},8964:(e,t,n)=>{n.d(t,{A:()=>a});var i=n(1601),o=n.n(i),s=n(6314),r=n.n(s)()(o());r.push([e.id,".eye {\n    cursor: pointer;\n    border-radius: 5px;\n    padding: 0 1px;\n    margin-bottom: -1px;\n}\n.eye:hover {\n    outline: 3px solid #7c7c7c;\n}\n",""]);const a=r},9860:(e,t,n)=>{n.d(t,{H:()=>r});var i=n(4848),o=n(6540),s=n(205);const r=({children:e,onClick:t,onMouseDown:n,onMouseMove:r,onMouseUp:a,...c})=>{const l=(0,o.useRef)(null),[d,u]=(0,o.useState)(null);return(0,o.useEffect)(()=>{if(l.current){const t=l.current.getContext("2d");e(t),u(t)}},[e]),(0,i.jsx)("canvas",{ref:l,...c,onClick:t&&d?e=>t(d,(0,s.Oo)(e.nativeEvent.offsetX,e.nativeEvent.offsetY)):void 0,onMouseDown:n&&d?e=>n(d,(0,s.Oo)(e.nativeEvent.offsetX,e.nativeEvent.offsetY)):void 0,onMouseMove:r&&d?e=>r(d,(0,s.Oo)(e.nativeEvent.offsetX,e.nativeEvent.offsetY)):void 0,onMouseUp:a&&d?e=>a(d,(0,s.Oo)(e.nativeEvent.offsetX,e.nativeEvent.offsetY)):void 0})}},9980:(e,t,n)=>{n.d(t,{c:()=>o});var i=n(6540);function o(e,t=!0){const n=(0,i.useMemo)(()=>({moving:!1,callback:e}),[]);return(0,i.useEffect)(()=>{if(!t)return()=>{};function e(e){n.moving&&requestAnimationFrame(()=>n.callback(e))}function i(e){e.stopPropagation(),n.moving=!1}return document.addEventListener("touchmove",e),document.addEventListener("touchend",i),document.addEventListener("mousemove",e),document.addEventListener("mouseup",i),()=>{document.removeEventListener("mousemove",e),document.removeEventListener("mouseup",i),document.removeEventListener("touchmove",e),document.removeEventListener("touchend",i)}},[t]),{startMoving:()=>{n.moving=!0,n.callback=e}}}}}]);